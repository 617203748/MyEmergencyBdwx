										安装Apache
安装位置：/mydata/setup/apache //自定义目录
步骤一：安装所需要系统库相关库文件
	# yum install wget
	# yum install lrzsz		（rz是上传命令）
	# yum -y groupinstall "Perl Support" 
	# yum groupinstall "Development Tools" 
	# yum -y install gcc gcc-c++ gcc-g77 autoconf automake zlib* fiex* libxml* ncurses-devel libmcrypt* libtool-ltdl-devel* make vim bison cmake
	# yum -y install gcc gcc-c++ openssl openssl-devel ncurses ncurses-devel cmake
	# yum -y install libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libxml2 libxml2-devel pcre-devel
	# yum -y install gcc gcc-c++ autoconf mysql-devel make cmake pkgconfig libtool ncurses ncurses-devel  gettext gettext-devel libgnomeui-devel 
	# yum -y install gettext
	# yum -y  install libgnomeui-devel

#安装pcre
[root@localhost local]#  tar -zxv -f pcre-8.37.tar.gz
[root@localhost local]#  cd pcre-8.37
[root@localhost apr-1.4.6]# ./configure --prefix=/mydata/setup/pcre
[root@localhost apr-1.4.6]# make
[root@localhost apr-1.4.6]# make install

#安装新版本apr
[root@localhost local]#  tar -zxv -f apr-1.5.2.tar.gz
[root@localhost local]#  cd apr-1.5.2
[root@localhost apr-1.4.6]# ./configure --prefix=/mydata/setup/apr
[root@localhost apr-1.4.6]# make
[root@localhost apr-1.4.6]# make install

#安装apr-util
[root@localhost local]#  tar -zxv -f apr-util-1.5.4.tar.gz
[root@localhost local]# cd apr-util-1.5.4
[root@localhost apr-util-1.5.1]# ./configure --prefix=/mydata/setup/apr-util --with-apr=/mydata/setup/apr
[root@localhost apr-util-1.5.1]# make
[root@localhost apr-util-1.5.1]# make install

安装apache
#执行安装 
[root@localhost local]# tar -zxv -f httpd-2.4.20.tar.gz           #解压压缩包 
[root@localhost local]# rm -rf httpd-2.4.20.tar.gz            #删除压缩包 
[root@localhost local]# mv httpd-2.4.20 apache
[root@localhost local]# cd apache

#设置参数安装 
[root@localhost php5.4]# ./configure --prefix=/mydata/setup/apache24 \
--with-apr=/mydata/setup/apr \
--with-apr-util=/mydata/setup/apr-util \
--with-pcre=/mydata/setup/pcre \
--enable-modules=all \
--enable-mods-shared=all \
--enable-so
[root@localhost php5.4]# make
[root@localhost php5.4]# make install


打开防火墙
vim /etc/sysconfig/iptables
添加端口
-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT
service iptables restart;

vim /etc/profile

#Apache24
export APACHE_HOME=/mydata/setup/apache24
export PATH=$APACHE_HOME/bin:$PATH

启动apache服务器：
[root@localhost /]# /mydata/setup/apache24/bin/apachectl start 

8、配置文件(配置php拓展)
	vim /mydata/setup/apache24/conf/httpd.conf

    找到：
    AddType  application/x-compress .Z
    AddType application/x-gzip .gz .tgz
    在后面添加：
    AddType application/x-httpd-php .php（使Apcche支持PHP）
    AddType application/x-httpd-php-source .php5   
    找到：
    <IfModule dir_module>
    DirectoryIndex index.html
    </IfModule>
    添加：
    <IfModule dir_module>
    DirectoryIndex index.html index.php
    </IfModule>    
    找到：
    ＃ServerName www.example.com:80
    修改为：
    ServerName 127.0.0.1:80或者ServerName localhost:80
    记得要去掉前面的“＃”    


										安装 PHP 7.0.1
 
上传php7安装包解压缩到 /mydata 目录下然后编译
./configure --prefix=/mydata/php7 \
 --with-apxs2=/mydata/setup/apache24/bin/apxs \
 --with-mysql=mysqlnd \
 --with-curl \
 --with-freetype-dir \
 --with-gd \
 --with-gettext \
 --with-iconv-dir \
 --with-kerberos \
 --with-libdir=lib64 \
 --with-libxml-dir \
 --with-mysqli \
 --with-openssl \
 --with-pcre-regex \
 --with-pdo-mysql \
 --with-pdo-sqlite \
 --with-pear \
 --with-png-dir \
 --with-xmlrpc \
 --with-xsl \
 --with-zlib \
 --enable-fpm \
 --enable-bcmath \
 --enable-libxml \
 --enable-inline-optimization \
 --enable-gd-native-ttf \
 --enable-mbregex \
 --enable-mbstring \
 --enable-opcache \
 --enable-pcntl \
 --enable-shmop \
 --enable-soap \
 --enable-sockets \
 --enable-sysvsem \
 --enable-xml \
 --enable-zip
 
 php5.6 编译
	./configure --prefix=/mydata/setup/php  --enable-fpm --with-mysql=mysqlnd --with-mysqli=mysqlnd --with-pdo-mysql=mysqlnd --with-mhash --with-openssl --with-zlib --with-bz2 --with-curl --with-libxml-dir --with-gd --with-jpeg-dir --with-png-dir --with-zlib --enable-mbstring --with-mcrypt --enable-sockets --with-iconv-dir --with-xsl --enable-zip --with-pcre-dir --with-pear --enable-session  --enable-gd-native-ttf --enable-xml --with-freetype-dir --enable-gd-jis-conv --enable-inline-optimization --enable-shared --enable-bcmath --enable-sysvmsg --enable-sysvsem --enable-sysvshm --enable-mbregex --enable-pcntl --with-xmlrpc --with-gettext --enable-exif --with-readline --with-recode --with-tidy  

 
 如出现curl报错 则yum install curl curl-devel
 
 make &&  make install


    cp /mydata/php-7.0.11/php.ini-development  /mydata/php7/lib/php.ini
    
    
    

<VirtualHost *:80>
    DocumentRoot "D:/web/www/"
    ErrorLog "logs/lp-error.log"
    CustomLog "logs/lp-access.log" common

    Alias /upload 	"D:/web/www/upload/"
    Alias / 		"D:/web/www/pc/"

    DirectoryIndex index.php index.html index.htm 
    <Directory />
       Options Indexes FollowSymLinks
	   AllowOverride none
	   Require all granted
    </Directory>
</VirtualHost>













